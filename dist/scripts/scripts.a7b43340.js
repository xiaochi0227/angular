"use strict";angular.module("myApp",["ngRoute","ngResource"]).directive("hello",function(){return{restrict:"E",template:"<h1>Hello Directive!<span ng-transclude></span></h1>",replace:!1,transclude:!0}}).directive("expander",function(){return{restrict:"EA",replace:!0,transclude:!0,template:'<div><div class="title" ng-click="toggle()" >{{title}}</div><div class="body" ng-show="showMe" ng-transclude></div></div>',link:function(a,b,c){a.showMe=!1,a.toggle=function(){a.showMe=!a.showMe}}}}).controller("directiveCtrl",["$scope",function(a){a.title="点击展开",a.text="body内容"}]).directive("accordion",function(){return{restrict:"E",replace:!0,transclude:!0,scope:{},template:'<div class="accordion" ng-transclude></div>',controller:function(){var a=[];this.gotOpened=function(b){angular.forEach(a,function(a){b!=a&&(a.showMe=!1)})},this.addExpander=function(b){a.push(b)}}}}).directive("myDirective",function(){return{restrict:"E",replace:!0,transclude:!0,require:"^?accordion",template:'<div><div class="title" ng-click="toggle()">{{expander.title}}</div><div class="body" ng-show="showMe" ng-transclude></div></div>',link:function(a,b,c,d){a.showMe=!1,d.addExpander(a),a.toggle=function(){a.showMe=!a.showMe,d.gotOpened(a)}}}}).controller("sumCtrl",["$scope",function(a){a.expanders=[{title:"Click me to expand",text:"Hi there folks, I am the content that was hidden but is now shown."},{title:"Click this",text:"I am even better text than you have seen previously"},{title:"Test",text:"test"}]}]).directive("tableDirective",["$compile",function(a){return{restrict:"E",replace:!0,scope:{name:"@name",age:"=",changeName:"&changeName"},templateUrl:"views/deTable.html",link:function(a,b,c){console.log("link")}}}]).controller("competenceCtrl",["$scope","competenceService","$http","$timeout",function(a,b,c,d){a.name="test scope",a.age="21",a.changeName=function(){a.name="xiaochi"};var e=d(function(){console.log("haha")},500);e.then(function(){console.log("x")});var f=b("../../test.json");f.get().$promise.then(function(b){a.result=b.result})}]).config(["$routeProvider",function(a){a.when("/",{controller:"myFormController",templateUrl:"views/test-index.html"}).when("/test",{templateUrl:"test-template.html"}).when("/competence",{controller:"competenceCtrl",templateUrl:"competence.html"}).when("/detail/:id",{controller:"detailCtrl",templateUrl:"views/test-detail.html"}).otherwise({redirectTo:"/"})}]),angular.module("myApp").controller("myFormController",["$rootScope","$scope","storage","$location",function(a,b,c,d){b.users=c.get()||[],b.editIndex=-1,a["goto"]=function(a,b){d.path(a)},b.edit=function(a){var c=b.users[a];b.user={email:c.email,password:c.password},b.editFlag=a},b.reset=function(){b.user.email="",b.user.password=""},b.remove=function(a){b.users.splice(a,1),c.set(b.users)},b.submit=function(){var a={email:b.user.email.trim(),password:b.user.password};console.log("test");var d=c.get();b.editFlag>-1?d[b.editFlag]=a:d.push(a),c.set(d),b.users=d,b.editFlag=-1,b.reset(),console.log(b.users)}}]).controller("detailCtrl",["$scope","storage","$routeParams",function(a,b,c){a.id=c.id,a.user=b.get()[a.id]}]),angular.module("myApp").factory("storage",function(){var a="TEST",b={_getLocalStorage:function(){return JSON.parse(localStorage.getItem(a)||"[]")},_setLocalStorage:function(b){localStorage.setItem(a,JSON.stringify(b))},get:function(){return b._getLocalStorage()},set:function(a){b._setLocalStorage(a)}};return b}).factory("competenceService",["$resource",function(a){var b={get:{method:"get",dataType:"json"},update:{method:"post"},create:{method:"put"}},c=function(c,d,e){e=angular.extend(b,e);var f=a(c,d,e);return f.prototype.$save=function(){return this.id?this.$update():this.$create()},f};return c}]),angular.module("angularTestApp").run(["$templateCache",function(a){a.put("views/deTable.html",'<div class="table"> <div class="test-input"> <input type="text" ng-model="name"> <input type="text" ng-model="age"> <button ng-click="changeName()">click to change name</button> </div> <table> <thead> <th style="width:100px">姓名</th> <th style="width:100px">性别</th> <th style="width:100px">爱好</th> </thead> <tbody> <tr ng-repeat="item in result"> <td>{{item.name}}</td> <td>{{item.sex}}</td> <td>{{item.type}}</td> </tr> </tbody> </table> </div>'),a.put("views/test-detail.html",'<div class="container" ng-controller="detailCtrl"> {{id}} <h3>参数为:{{id}}</h3> <p> 邮箱:{{user.email}} 密码:{{user.password}} </p> </div>'),a.put("views/test-index.html",'<div> <div class="container"> <form ng-submit="submit()" id="myForm"> <div class="form-group"> <label for="exampleInputEmail1">Email address</label> <input type="text" class="form-control" ng-model="user.email" required placeholder="Email"> </div> <div class="form-group"> <label for="exampleInputPassword1">Password</label> <input type="password" class="form-control" ng-model="user.password" required placeholder="Password"> </div> <button ng-click="$myForm.submit()" class="btn btn-default">Submit</button> <button ng-click="reset()" class="btn">Reset</button> </form> </div> <div class="container" style="margin-top: 20px"> <table class="table table-striped"> <tr> <td>#id</td> <td>email</td> <td>password</td> <td>dosth</td> </tr> <tr ng-repeat="item in users" ng-dblclick="edit($index)"> <td ng-class="$index%2?\'active\':\'\'">{{$index+1}}</td> <td>{{item.email}}</td> <td>{{item.password}}</td> <td> <a ng-click="goto(\'detail/\'+$index)">查看</a> <a ng-click="remove($index)">删除</a> </td> </tr> </table> </div> </div>')}]);